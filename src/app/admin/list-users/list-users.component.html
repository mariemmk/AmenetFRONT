<div class="row">
    <div class="col-md-12">
        <div class="panel panel-default">
  
            <div class="panel-heading">
                <h3 class="panel-title">Users List</h3>
            </div>
  
            <div class="panel-body panel-body-table">
  
                <div class="table-responsive">
                           <table class="table table-hover">
                            <caption>List of users</caption>
                                    <thead>
                                            <tr>
                                                 <th scope="col">#id</th>
                                    
                                                 <th scope="col">First Name</th>
                                                 <th scope="col">Family Name</th>
                                                 <th scope="col">Phone Number</th>
                                                 <th scope="col">CIN</th>
                                                 <th scope="col">Email</th>
                                                 <th scope="col">Address</th>
                                                 <th scope="col">Actions</th>
                                            </tr>
                                    </thead>
    <tbody class="table-group-divider">
        <tr *ngFor="let user of users" class="fixed-height-row">
            <td>{{ user.idUser }}</td>
            <td>{{ user.firstName }}</td>
            <td>{{ user.familyName }}</td>
            <td>{{ user.phoneNumber }}</td>
            <td>{{ user.cin }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.address }}</td>
            <td class="btn-group">
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#userDetailsModal" (click)="consulterUtilisateur(user)"><i class="bi bi-box-arrow-up-left"></i></button>
                <button class="btn btn-info" data-bs-toggle="modal" data-bs-target="#userEditModal" (click)="modifierUtilisateur(user)"><i class="bi bi-pencil-square"></i></button>
                <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteConfirmationModal" (click)="supprimerUtilisateur(user)"><i class="bi bi-trash"></i></button>
                <button class="btn btn-warning" (click)="bloquerUtilisateur(user.idUser)"><i class="bi bi-slash-square"></i></button>
            </td>
        </tr>
    </tbody>
  </table>
</div>                                

</div>
</div>                                                

</div>
</div>


<!-- Modal pour afficher les dÃ©tails -->
<div class="modal fade" id="userDetailsModal" tabindex="-1" role="dialog" aria-labelledby="userDetailsModalLabel" aria-hidden="true" *ngIf="selectedUser">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="userDetailsModalLabel">User Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
        </button>
      </div>
      <div class="modal-body">
        <div class="user-details">
          <div class="row">
            <div class="col-6">
              <span class="label">
                Verified : <i [ngClass]="{'bi bi-check2 green' : selectedUser.isVerified , 'bi bi-x red' : !selectedUser.isVerified}"></i>
              </span>
            </div>
           
          </div>
          <div class="row">
              <span class="col-6 label">Creation date:</span>
              <span class="col-6">{{ getFormattedDate(selectedUser.createdAt) }}</span>
          </div>
          
          <hr>
          <div class="row">
              <span class="col-6 label">ID Client:</span>
              <span class="col-6">{{ selectedUser.idUser || "--"}}</span>
          </div>
          
          <div class="row">
              <span class="col-6 label">Name:</span>
              <span class="col-6">{{ selectedUser.firstName || "--"}}</span>
          </div>
          <div class="row">
              <span class="col-6 label">Family Name:</span>
              <span class="col-6">{{ selectedUser.familyName || "--"}}</span>
          </div>
          <div class="row">
              <span class="col-6 label">Phone Number:</span>
              <span class="col-6">{{ selectedUser.phoneNumber || "--"}}</span>
          </div>
          <div class="row">
              <span class="col-6 label">CIN:</span>
              <span class="col-6">{{ selectedUser.cin || "--"}}</span>
          </div>
          <div class="row">
              <span class="col-6 label">Email:</span>
              <span class="col-6">{{ selectedUser.email || "--"}}</span>
          </div>
          <hr>
          <div class="row">
              <span class="col-6 label">Address:</span>
              <span class="col-6">{{ selectedUser.address || "--"}}</span>
          </div>
          <div class="row">
            <span class="col-6 label">Date of birth:</span>
            <span class="col-6">{{ getFormattedDate(selectedUser.birthDate) || "--" }}</span>
        </div>
  
      </div>
      
      </div>
      <div class="modal-footer text-end">
        <button type="button" class="btn btn-danger" data-dismiss="modal" data-bs-dismiss="modal" aria-label="Fermer">Close</button>
      </div>
    </div>
  </div>
</div>



<!-- Modal de modification  -->

        <app-edit-user [user]="selectedUser"></app-edit-user>





<!-- Modal de confirmation de suppression -->
<div class="modal fade" id="deleteConfirmationModal" tabindex="-1" role="dialog" aria-labelledby="deleteConfirmationModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteConfirmationModalLabel">Confirm deletion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
        </button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete this user?</p>
      </div>
      <div class="modal-footer text-end">
        <button type="button" class="btn btn-info" data-bs-dismiss="modal" data-bs-dismiss="modal" aria-label="Fermer">Close</button>
        <button type="button" class="btn btn-danger" data-bs-dismiss="modal" >Confirm</button>
      </div>
    </div>
  </div>
</div>

<app-side-bar-admin></app-side-bar-admin>