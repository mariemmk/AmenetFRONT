<article class="main table-wrap col-md-6 mx-auto my-5" style="margin-top: 20px;">
  <div *ngIf="showForm">
    <h4 style="color: #03943F; font-weight: bold" class="mb-4">Demande De Credit</h4>
    <form class="form-horizontal" #creditRequestForm="ngForm" (ngSubmit)="submitCreditRequest()">
      <div class="form-group">
        <label class="control-label col-sm-12" for="amount">Amount:</label>
        <div class="col-sm-12">
          <input type="text" class="form-control" id="amount" name="amount" placeholder="amount" [(ngModel)]="creditRequest.amount" required>
        </div>
      </div>
      <div class="form-group">
        <label for="loanType" class="form-label">Loans Type</label>
        <select id="loanType" name="loanType" class="form-select" [(ngModel)]="creditRequest.loanType" required>
          <option value="" disabled selected>Choose...</option>
          <option *ngFor="let one of loanType " [value]="one">{{ one }}</option>
        </select>
      </div>
      <div *ngIf="creditRequest.loanType === 'Auto_invest'">
        <div class="form-group">
          <label class="control-label col-sm-12" for="carPrice">Car Price:</label>
          <div class="col-sm-12">
            <input type="number" class="form-control" id="carPrice" name="carPrice" placeholder="Car Price" [(ngModel)]="creditRequest.carPrise">
          </div>
        </div>
        <div class="form-group">
          <label class="control-label col-sm-12" for="horsepower">Horsepower:</label>
          <div class="col-sm-12">
            <input type="number" class="form-control" id="horsepower" name="horsepower" placeholder="Horsepower" [(ngModel)]="creditRequest.horsePower">
          </div>
        </div>
      </div>
      <div class="form-group">
        <label class="control-label col-sm-12" for="duration">Duration :</label>
        <div class="col-sm-12">
          <input type="number" class="form-control" id="duration" name="duration" placeholder="duration" required [(ngModel)]="creditRequest.duration">
        </div>
      </div>
      
      <div class="form-group">
        <div class="col-sm-12 text-center">
          <button type="submit" class="btn btn-primary">Submit Request</button>
        </div>
      </div>
    </form>
  </div>
</article>
<div class="col-md-6 mx-auto my-5" style="margin-left: 50px;"  style="margin-top: 50px;">
<div *ngIf="!showForm">
  <h5 class="text-center">Credit Status: {{ creditRequest.status }}</h5>

  <!-- Tableau d'amortissement -->
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Month</th>
        <th>Principal</th>
        <th>Interest</th>
        <th>Remaining Balance</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let entry of creditRequest.amortizationSchedule">
        <td>{{ entry.month }}</td>
        <td>{{ entry.principal | currency }}</td>
        <td>{{ entry.interest | currency }}</td>
        <td>{{ entry.remainingBalance | currency }}</td>
      </tr>
    </tbody>
  </table>
</div>

</div>